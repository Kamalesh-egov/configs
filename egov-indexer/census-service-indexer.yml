ServiceMaps:
  serviceName: census-service
  version: 1.0.0
  mappings:
    - topic: census-create-topic
      configKey: INDEX
      indexes:
        - name: census-index-v1
          type: general
          id: $.id
          timeStampField: $.auditDetails.createdTime
          jsonPath: $.Census
          customJsonMapping:
            indexMapping: {"Data":{}}
            fieldMapping:
              - inJsonPath: $
                outJsonPath: $.Data

    - topic: census-update-topic
      configKey: INDEX
      indexes:
        - name: census-index-v1
          type: general
          id: $.id
          timeStampField: $.auditDetails.createdTime
          jsonPath: $.Census
          customJsonMapping:
            indexMapping: { "Data": {} }
            fieldMapping:
              - inJsonPath: $.status
                outJsonPath: $.Data.status
              - inJsonPath: $.assignee
                outJsonPath: $.Data.assignee
              - inJsonPath: $.additionalDetails
                outJsonPath: $.Data.additionalDetails
              - inJsonPath: $.facilityAssigned
                outJsonPath: $.Data.facilityAssigned
              - inJsonPath: $.effectiveTo
                outJsonPath: $.Data.effectiveTo
              - inJsonPath: $.auditDetails
                outJsonPath: $.Data.auditDetails
              - inJsonPath: $.populationByDemographics
                outJsonPath: $.Data.populationByDemographics
              - inJsonPath: $.additionalFields
                outJsonPath: $.Data.additionalFields

    - topic: census-bulk-update-topic
      configKey: INDEX
      indexes:
        - name: census-index-v1
          type: general
          id: $.id
          isBulk: true
          timeStampField: $.auditDetails.createdTime
          jsonPath: $.Census
          customJsonMapping:
            indexMapping: {"Data":{}}
            fieldMapping:
              - inJsonPath: $.status
                outJsonPath: $.Data.status
              - inJsonPath: $.assignee
                outJsonPath: $.Data.assignee
              - inJsonPath: $.additionalDetails
                outJsonPath: $.Data.additionalDetails
              - inJsonPath: $.facilityAssigned
                outJsonPath: $.Data.facilityAssigned
              - inJsonPath: $.auditDetails
                outJsonPath: $.Data.auditDetails
